name: Run Checks

on:
  push:
    branches-ignore:
      # don't run checks on changeset-release/master branch since there are only release PRs there
      - changeset-release/master

permissions:
  contents: read
  packages: read

jobs:
  test:
    runs-on: blacksmith-2vcpu-ubuntu-2404
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Set Up Node.js
        uses: FigurePOS/github-actions/.github/actions/setup-node@v1
        with:
          version: "24.x"

      - name: Install Dependencies
        uses: FigurePOS/github-actions/.github/actions/install-dependencies@v1

      - name: Install Example App
        uses: FigurePOS/github-actions/.github/actions/install-dependencies@v1
        with:
          directory: example

      - name: Check Lint
        run: yarn check:lint

      - name: Check TS
        run: yarn check:ts

      - name: Run Tests
        run: yarn test:ts:ci

      - name: Format Code
        run: yarn check:format
